{"componentChunkName":"component---src-templates-lesson-template-js","path":"/what-is/dependency-hell","result":{"data":{"markdownRemark":{"html":"<p>Dependencies have been a topic of ongoing controversy as long as computers have existed. Across all platforms, all languages, all runtimes. Everywhere. People have different opinions about how dependencies should be resolved, packaged, referenced and the like. And make no mistake, dependencies are hard.</p>\n<p>The reason for this is that dependencies often take dependencies of their own and those dependencies have dependencies. And that just explodes into a million dependencies to do something very simple.</p>\n<p>So what's wrong with the way that Node.js handles dependencies? Well, there are a few things that...maybe could be handled differently.</p>\n<h2 id=\"npm-and-single-points-of-failure\" style=\"position:relative;\"><a href=\"#npm-and-single-points-of-failure\" aria-label=\"npm and single points of failure permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>npm and Single Points of Failure</h2>\n<p>First off, npm is the central package repository for Node. Yes, technically anyone can setup a package repository and you can have private ones as well. But by and large, nearly the entire community is served by npm. Is that a bad thing? Maybe, maybe not.</p>\n<p>You may recall that last year there was some escalating issues with npm as it tried to generate enough revenue to stay afloat. Serving up packages to everyone in the world is an expensive endeavor. I don't know if you've ever looked at cloud bandwidth bills, but they are frequently the lions share of cloud computing costs. And npm is absorbing that every day. GitHub stepped in and purchased npm earlier this year, possibly preventing what could have been the collapse of essentially where all our Node packages live.</p>\n<p>Again, is a single package repository a bad thing? Maybe not. It's incredibly convenient to have a central place to look for any code you might want to use and not have it strewn about over the internet. It's probably a driving force behind why Node's adoption was so quick as well.</p>\n<p>But for that convenience we get a single point of failure and it is now owned by a corporation. Some people may not feel great about those two realities.</p>\n<h3 id=\"packagejson\" style=\"position:relative;\"><a href=\"#packagejson\" aria-label=\"packagejson permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>package.json</h3>\n<p>Believe it or not, one of the things that Brian regrets is the <code class=\"language-text\">package.json</code> file. I find this to be a nitpick, but he feels like it's a lot of boilerplate and for what? He's got a point there.</p>\n<p>Create a new folder and in that folder, execute the following command...</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">npm init</code></pre></div>\n<p>You get asked about a dozen questions and it's not clear why you need any of this information. What's an entrypoint? Do you need one? Why do you need a version? Keywords? These things might be important if you are creating an npm package, but most of us are not doing that. The <code class=\"language-text\">package.json</code> is usually full of information that you don't really need. It's extraneous.</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"2-dependency-hell\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"description\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"main\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"index.js\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"test\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"echo \\\"Error: no test specified\\\" &amp;&amp; exit 1\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"keywords\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"author\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"license\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"ISC\"</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Now, it should be noted that you can execute the shorthand...</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">npm init <span class=\"token operator\">-</span>y</code></pre></div>\n<p>Which won't ask you any questions, but still gives you the same output.</p>\n<p>This is not necessarily a bad thing. The <code class=\"language-text\">package.json</code> file lets you specify a lot of metadata that a lot of libraries do use. For instance, when you publish a VS Code extension, it needs some fields in that <code class=\"language-text\">package.json</code> in order to fill out the page for your extension correctly.</p>\n<p>One last point about the <code class=\"language-text\">package.json</code> is that it contributes to the bloat of configuration files in a repo. Just look at the number of config files in the static site code for this course...</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/deno-first-look/static/1417d15c9c6eb32628499340059bee1f/fb816/static-site-deps.jpg\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/jpeg;base64,/9j/2wBDAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/2wBDAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQH/wgARCAASABQDAREAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAAAwQFCf/EABkBAAIDAQAAAAAAAAAAAAAAAAECAAMFBP/aAAwDAQACEAMQAAAB7kFWsXL0eGvM0javXBR0FGjM/8QAHBAAAgICAwAAAAAAAAAAAAAAAgMBBAARBRIU/9oACAEBAAEFArWjTWlhLs8f6mXllKKU7jvVjHiJsWIhDGGJf//EACcRAAIBAgQFBQEAAAAAAAAAAAECEQQSAAMTIRAjMTJBFDNCUnHR/9oACAEDAQE/AQgctv7a6wkO26T9Zg79z8sfPxwqaA1WZqetr6eFsspanRyzDMbyum8uboLT0CiNsIyqc264XZRRbbe9u0PJHLO98S3SFPARv+nDKrMbgGtOW6yAbWF0MJ6MPBG44D+4/8QAJhEAAgECBQQCAwAAAAAAAAAAAQIRAxIABBMhIgUjQUJysRAxMv/aAAgBAgEBPwEmmFQVPapYnNU7hiz+iL/PbTuP6jY4OMt1FcnT0j07pmbkh9TO5TXqiUQWB9VIpi2QsbFmM74uCqk06dWXsGoJ0y0DWpyptq0/RuMXHkMHDzI+K/QwjMqcWK3LVRrSRcpslTH7U+Qdj+G8fFfrH//EACgQAQABAwIDCAMAAAAAAAAAAAECAxESACETIkEEBRQjMVFicTNhsf/aAAgBAQAGPwKlUpGzwqhzLYeKu+Zdi7F2R8dZVFcna4RsH0HrrieN7x7LiYYdl7y8LTcV5+FhPm3xZX5sTbq0i/Bac6NWZGxljxWcfLSPmLdL2eur5VJcpFv+OOPQvUd0+B96tVIZ73yoSm+u3MHtqROJMOGhIJA2nuD1/ekjGMT2iB/NITmHsSQ1/8QAHBABAQEAAwEBAQAAAAAAAAAAAREhADFBYVFx/9oACAEBAAE/IUWlkLyPLFEAWlGF33A4COdvvvx4sABL6xRm94Ibg62Eg1hSEg/qcdkvtDcxU5PQBMTi5TDTRJ0R0e507yS6tgwJQFYC6/vHhJML74A4FtOClK4Ia6/ef//aAAwDAQACAAMAAAAQUSVU3//EAB4RAQEAAgICAwAAAAAAAAAAAAERACExQWHwEHGh/9oACAEDAQE/EFRBCKNwEhrkZJyjAg2QBKKeoIsxs07LlhJg3wpxluh77+4hDNdXn6zoZsS9ed10qMSvwmO3nt5c/8QAHhEBAAICAwEBAQAAAAAAAAAAAREhADFBUXFhgcH/2gAIAQIBAT8QK2SMOblv1pGaqA0VHszvnXFfcfMhGnF76W2hQkMpoNZd5d6rKud4D928wQAVs3JgoTHZ/bvAS0gR2/FUtQEjBkrtnCLIPD5z/8QAGhABAQEBAQEBAAAAAAAAAAAAAREAITFBUf/aAAgBAQABPxAvGMLg4NjZDmG0NDTtqFG15BCtJjbv4cW1D3kmD6h+MMrE7Cqmt7sLU6Je61RUaDB9IgZJ6AFL4HfOZdJiB7A8EqvDAVNCFUJWKXr+uCsxRAEDijA6lerv/9k='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"static site dependencies\"\n        title=\"static site dependencies\"\n        src=\"/deno-first-look/static/1417d15c9c6eb32628499340059bee1f/a24e6/static-site-deps.jpg\"\n        srcset=\"/deno-first-look/static/1417d15c9c6eb32628499340059bee1f/a6b4f/static-site-deps.jpg 200w,\n/deno-first-look/static/1417d15c9c6eb32628499340059bee1f/a6407/static-site-deps.jpg 400w,\n/deno-first-look/static/1417d15c9c6eb32628499340059bee1f/a24e6/static-site-deps.jpg 800w,\n/deno-first-look/static/1417d15c9c6eb32628499340059bee1f/fb816/static-site-deps.jpg 960w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"node_modules\" style=\"position:relative;\"><a href=\"#node_modules\" aria-label=\"node_modules permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>node_modules</h2>\n<p>The node_modules folder has become notorious for being exceptionally large. You have no idea how many depencencies you are getting yourself into, and these folders often balloon to a laughable size.</p>\n<p>In the folder where you initialized a project, run the following command to install the common axios web request package...</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i axios</code></pre></div>\n<p>Examine the node_modules folder. You'll see that you get \"axios\", and \"follow-redirects\". I'm not exactly sure why axios needs that, but I don't have a problem with it taking only one dependency.</p>\n<p>Now try this - install \"react-scripts\", the package the create-react-app uses...</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">npm</span> i react-scripts</code></pre></div>\n<p>This is going to take a while, and when it's done, you'll see that your node_modules folder has grown to around 302 MB. That's....a lot. This is not a shot at React. It is not alone in requiring what seems like an innapropriate amount of dependencies just to build a website.</p>\n<p>In cases where you need to deploy a Node.js app to run on a server, the entire node_modules folder needs to be there as well. This requires an <code class=\"language-text\">npm install</code> to happen on the server, or on a build server and all the assets copied in. In his talk, Ryan mentions that his primary hangup with this is that the build assset should be an executable - kind of like a .exe. Instead of needing thousands of files to run a project.</p>","frontmatter":{"path":"/what-is/dependency-hell","title":"Dependency Hell","order":"2C","section":"What is Deno","description":"Burke looks at what the current state of dependencies in Node.js is, and why Deno has a fundamentally different approach."}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"order":"1A","path":"/intro","title":"Introduction"}}},{"node":{"frontmatter":{"order":"4D","path":"/dependencies/best-practices.md","title":"Best Practices"}}},{"node":{"frontmatter":{"order":"4E","path":"/dependencies/compatibility-with-node.md","title":"Compatibility With Node"}}},{"node":{"frontmatter":{"order":"4B","path":"/dependencies/local-dependencies.md","title":"Local dependencies"}}},{"node":{"frontmatter":{"order":"4C","path":"/dependencies/remote-dependencies.md","title":"Remote dependencies"}}},{"node":{"frontmatter":{"order":"4A","path":"/dependencies/think-like-a-browser.md","title":"Thinking like a browser"}}},{"node":{"frontmatter":{"order":"8B","path":"/oak/deploying","title":"Bundling Deno Apps"}}},{"node":{"frontmatter":{"order":"8B","path":"/oak/deploying","title":"Containerizing a Deno Application"}}},{"node":{"frontmatter":{"order":"3E","path":"/getting-to-know/arguments-and-flags","title":"CLI Tour"}}},{"node":{"frontmatter":{"order":"3F","path":"/getting-to-know/debugging","title":"Debugging"}}},{"node":{"frontmatter":{"order":"3C","path":"/getting-to-know/deno-object","title":"The Deno object"}}},{"node":{"frontmatter":{"order":"3D","path":"/getting-to-know/first-program","title":"Your first program"}}},{"node":{"frontmatter":{"order":"3A","path":"/getting-to-know/install","title":"Installing Deno"}}},{"node":{"frontmatter":{"order":"3B","path":"/getting-to-know/tooling","title":"Tooling"}}},{"node":{"frontmatter":{"order":"7A","path":"/oak/introducing-oak","title":"Introducing Oak"}}},{"node":{"frontmatter":{"order":"7C","path":"/oak/oak-router","title":"The Oak Router"}}},{"node":{"frontmatter":{"order":"7C","path":"/oak/oak-templates","title":"Templates"}}},{"node":{"frontmatter":{"order":"7B","path":"/oak/simple-oak","title":"A Simple Oak Server"}}},{"node":{"frontmatter":{"order":"7E","path":"/oak/simple-oak","title":"Servering Static Files"}}},{"node":{"frontmatter":{"order":"5D","path":"/permissions/determining-permissions","title":"Determining Permissions"}}},{"node":{"frontmatter":{"order":"5A","path":"/permissions/granting-permissions","title":"Granting Permissions"}}},{"node":{"frontmatter":{"order":"5C","path":"/permissions/permission-specificity","title":"Permission Specificity"}}},{"node":{"frontmatter":{"order":"5B","path":"/permissions/requesting-permissions","title":"Requesting Permissions"}}},{"node":{"frontmatter":{"order":"6B","path":"/webserver/reading-parameters","title":"Reading the query string"}}},{"node":{"frontmatter":{"order":"6A","path":"/webserver/simple","title":"Building a simple webserver"}}},{"node":{"frontmatter":{"order":"6C","path":"/webserver/static-files","title":"Servering up static files"}}},{"node":{"frontmatter":{"order":"2C","path":"/what-is/dependency-hell","title":"Dependency Hell"}}},{"node":{"frontmatter":{"order":"2B","path":"/what-is/secure-by-default","title":"Secure By Default"}}},{"node":{"frontmatter":{"order":"2D","path":"/what-is/typescript-first","title":"TypeScript First"}}},{"node":{"frontmatter":{"order":"2A","path":"/what-is/why-oh-why","title":"Why"}}}]}},"pageContext":{}},"staticQueryHashes":["2959687377"]}